<script src="~/lib/aspnet-client-validation/aspnet-validation.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var v = new aspnetValidation.ValidationService();
        v.ValidationInputCssClassName          = 'is-invalid';                 // change from default of 'input-validation-error'
        v.ValidationInputValidCssClassName     = 'is-valid';                   // change from default of 'input-validation-valid'
        v.ValidationMessageCssClassName        = 'invalid-feedback';           // change from default of 'field-validation-error'
        v.ValidationMessageValidCssClassName   = 'valid-feedback';             // change from default of 'field-validation-valid'
        v.bootstrap();
        const forms = document.querySelectorAll('form');

        forms.forEach(form => {
            form.addEventListener('submit', function (event) {
                let isValid = true;

                form.querySelectorAll('input, select, textarea').forEach(input => {
                    if (!input.checkValidity()) {
                        input.classList.remove('is-valid');
                        input.classList.add('is-invalid');
                        isValid = false;
                    } else {
                        input.classList.remove('is-invalid');
                        input.classList.add('is-valid');
                    }
                });

                if (!isValid) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            });
        });
    });
</script>
